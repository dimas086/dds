<!DOCTYPE html>
<html>
<head>
    <title>ДДС</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>Движение денежных средств</h1>
        <form method="get" class="mb-3">
            <div class="row">
                <div class="col-md-3">
                    <label>Статус:</label>
                    <select name="status" class="form-control">
                        <option value="">Все</option>
                        {% for status in statuses %}
                            <option value="{{ status.name }}">{{ status.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <label>Тип:</label>
                    <select name="type" class="form-control">
                        <option value="">Все</option>
                        {% for type in types %}
                            <option value="{{ type.name }}">{{ type.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <label>Категория:</label>
                    <select name="category" class="form-control">
                        <option value="">Все</option>
                        {% for category in categories %}
                            <option value="{{ category.name }}">{{ category.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-3">
                    <label>Подкатегория:</label>
                    <select name="subcategory" class="form-control">
                        <option value="">Все</option>
                        {% for subcategory in subcategories %}
                            <option value="{{ subcategory.name }}">{{ subcategory.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-3">
                    <label>Дата от:</label>
                    <input type="date" name="date_from" class="form-control">
                </div>
                <div class="col-md-3">
                    <label>Дата до:</label>
                    <input type="date" name="date_to" class="form-control">
                </div>
                <div class="col-md-3 mt-4">
                    <button type="submit" class="btn btn-primary">Фильтровать</button>
                </div>
            </div>
        </form>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Дата</th>
                    <th>Статус</th>
                    <th>Тип</th>
                    <th>Категория</th>
                    <th>Подкатегория</th>
                    <th>Сумма (руб.)</th>
                    <th>Комментарий</th>
                </tr>
            </thead>
            <tbody>
                {% for transaction in transactions %}
                    <tr>
                        <td>{{ transaction.date }}</td>
                        <td>{{ transaction.status.name }}</td>
                        <td>{{ transaction.type.name }}</td>
                        <td>{{ transaction.category.name }}</td>
                        <td>{{ transaction.subcategory.name }}</td>
                        <td>{{ transaction.amount }}</td>
                        <td>{{ transaction.comment|default:"—" }}</td>
                    </tr>
                {% empty %}
                    <tr><td colspan="7">Нет записей</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>